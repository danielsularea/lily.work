!function(e){"use strict";var t,n=window.Main||{},r=n.settings={headerScroll:"js--headerScroll",staticryptForm:"js--staticryptForm",staticryptInsertHeader:"js--staticryptInsertHeader",staticryptInsertArticle:"js--staticryptInsertArticle",workMenu:"js--workMenu",workMenuLink:"js--workMenuLink",zoomImages:'[data-action="zoom"]'},o=function(e,t){var n=document.documentElement.offsetHeight-window.innerHeight;e>=n?e=n:e<=0&&(e=0);var r=(e-window.scrollY)/t*10;setTimeout(function(){window.scrollTo(window.scrollX,window.scrollY+r),window.scrollY!==e&&o(e,t-10)},10)},s=function(e){if(e)return e.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)},i=function(){Barba.Pjax.getTransition=function(){return Transition},document.addEventListener("DOMContentLoaded",function(e){Barba.Pjax.start()}),Barba.Dispatcher.on("transitionCompleted",function(e,t,n){f(),a(),k()})},a=function(){mediumZoom(document.querySelectorAll(r.zoomImages))},c=function(){t={exists:!1,element:void 0,offsetY:0,links:{},refs:{}}},l=function(){c();var e=document.getElementsByClassName(r.workMenu);if(e[0]){var n=e[0],o=n.dataset.offsety?n.dataset.offsety:0;t.exists=!0,t.element=e[0],t.offsetY=o;for(var s=document.querySelectorAll("."+r.workMenu+" a"),i=0;i<s.length;i++){var a=s[i].getAttribute("href").split("#")[1],l=document.getElementById(a);t.links[a]=s[i],t.refs[a]=l}}},d=function(){var e={};for(var n in t.refs){var r=parseInt(s(t.refs[n]));e[n]=r-t.offsetY}return e},f=function(){l()},u=function(){var e=document.getElementsByClassName(r.headerScroll);if(e[0]){var t=e[0];(window.pageYOffset||document.documentElement.scrollTop)>0?t.classList.add("fixed"):t.classList.remove("fixed")}},m=function(){if(t.exists){var e=t.element,n=e.parentNode,r=n.offsetTop,o=t.offsetY,i=window.pageYOffset||document.documentElement.scrollTop;s(n);e.style.opacity=i>=r-o-75?1:0,r-i<=o?(e.style.width=n.offsetWidth+"px",e.style.position="fixed",e.style.top=o+"px"):(e.style.width="auto",e.style.position="static")}},p=function(e){if(t.exists){e.preventDefault();var n=e.target.getAttribute("href").split("#")[1],r=t.refs[n],i=parseInt(s(r))-t.offsetY;e.target.blur(),o(i,300)}},v=function(e){e.preventDefault();var t=document.getElementsByClassName(r.staticryptForm);if(t[0]){var n=t[0],o=n.querySelectorAll('[type="password"]'),s=n.querySelectorAll('[type="submit"]');if(o[0]&&s[0]){var i=o[0].value,c=(s[0].value,n.dataset.encrypted),l=c.substring(0,64),d=c.substring(64);if(CryptoJS.HmacSHA256(d,CryptoJS.SHA256(i).toString()).toString()===l){var u=n.dataset.header,m=n.dataset.articleBefore,p=n.dataset.articleAfter,v=CryptoJS.AES.decrypt(d,i).toString(CryptoJS.enc.Utf8);n.remove();var w=document.getElementsByClassName(r.staticryptInsertHeader),y=document.getElementsByClassName(r.staticryptInsertArticle);w[0]&&w[0].insertAdjacentHTML("beforeend",u),y[0]&&y[0].insertAdjacentHTML("beforeend",m+marked(v)+p),f(),a(),k()}else alert("Bad passphrase!")}}},w=function(){if(t.exists){t.element;var e=window.pageYOffset||document.documentElement.scrollTop,n=d(),o=document.documentElement.offsetHeight-window.innerHeight;for(var s in t.links){var i=t.links[s].parentNode.classList;if(i.contains(r.workMenuLink)){var a=n[s];if(i.remove("active"),e>=a-1||e>=o){for(var c in t.links)t.links[c].parentNode.classList.remove("active");i.add("active")}}}}},y=function(){f(),m()},g=function(){u(),m(),w()},k=function(){window.addEventListener("resize",y),document.addEventListener("scroll",g),document.addEventListener("submit",v);for(var e in t.links)t.links[e].addEventListener("click",p)};n._init=function(){i(),f(),a(),k()},n._init()}();