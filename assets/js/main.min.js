!function(e){"use strict";var a,t=window.Main||{},v=t.settings={headerScroll:"js--headerScroll",staticryptForm:"js--staticryptForm",staticryptInsertHeader:"js--staticryptInsertHeader",staticryptInsertArticle:"js--staticryptInsertArticle",workMenu:"js--workMenu",workMenuLink:"js--workMenuLink",zoomImages:'[data-action="zoom"]'},o=function(e,t){var n=document.documentElement.offsetHeight-window.innerHeight;n<=e?e=n:e<=0&&(e=0);var r=(e-window.scrollY)/t*10;setTimeout(function(){window.scrollTo(window.scrollX,window.scrollY+r),window.scrollY!==e&&o(e,t-10)},10)},c=function(e){if(e)return e.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)},w=function(){mediumZoom(document.querySelectorAll(v.zoomImages))},n=function(){a={exists:!1,element:void 0,offsetY:0,links:{},refs:{}};var e=document.getElementsByClassName(v.workMenu);if(e[0]){var t=e[0],n=t.dataset.offsety?t.dataset.offsety:0;a.exists=!0,a.element=e[0],a.offsetY=n;for(var r=document.querySelectorAll("."+v.workMenu+" a"),o=0;o<r.length;o++){var s=r[o].getAttribute("href").split("#")[1],i=document.getElementById(s);a.links[s]=r[o],a.refs[s]=i}}},y=function(){n()},r=function(){if(a.exists){var e=a.element,t=e.parentNode,n=t.offsetTop,r=a.offsetY,o=window.pageYOffset||document.documentElement.scrollTop;c(t);e.style.opacity=n-r-75<=o?1:0,n-o<=r?(e.style.width=t.offsetWidth+"px",e.style.position="fixed",e.style.top=r+"px"):(e.style.width="auto",e.style.position="static")}},s=function(e){if(a.exists){e.preventDefault();var t=e.target.getAttribute("href").split("#")[1],n=a.refs[t],r=parseInt(c(n))-a.offsetY;e.target.blur(),o(r,300)}},i=function(e){e.preventDefault();var t=document.getElementsByClassName(v.staticryptForm);if(t[0]){var n=t[0],r=n.querySelectorAll('[type="password"]'),o=n.querySelectorAll('[type="submit"]');if(r[0]&&o[0]){var s=r[0].value,i=(o[0].value,n.dataset.encrypted),a=i.substring(0,64),c=i.substring(64);if(CryptoJS.HmacSHA256(c,CryptoJS.SHA256(s).toString()).toString()===a){var l=n.dataset.header,d=n.dataset.articleBefore,f=n.dataset.articleAfter,u=CryptoJS.AES.decrypt(c,s).toString(CryptoJS.enc.Utf8);n.remove();var m=document.getElementsByClassName(v.staticryptInsertHeader),p=document.getElementsByClassName(v.staticryptInsertArticle);m[0]&&m[0].insertAdjacentHTML("beforeend",l),p[0]&&p[0].insertAdjacentHTML("beforeend",d+marked(u)+f),y(),w(),g()}else alert("Bad passphrase!")}}},l=function(){if(a.exists){a.element;var e=window.pageYOffset||document.documentElement.scrollTop,t=function(){var e={};for(var t in a.refs){var n=parseInt(c(a.refs[t]));e[t]=n-a.offsetY}return e}(),n=document.documentElement.offsetHeight-window.innerHeight;for(var r in a.links){var o=a.links[r].parentNode.classList;if(o.contains(v.workMenuLink)){var s=t[r];if(o.remove("active"),s-1<=e||n<=e){for(var i in a.links)a.links[i].parentNode.classList.remove("active");o.add("active")}}}}},d=function(){y(),r()},f=function(){!function(){var e=document.getElementsByClassName(v.headerScroll);if(e[0]){var t=e[0];0<(window.pageYOffset||document.documentElement.scrollTop)?t.classList.add("fixed"):t.classList.remove("fixed")}}(),r(),l()},g=function(){for(var e in window.addEventListener("resize",d),document.addEventListener("scroll",f),document.addEventListener("submit",i),a.links)a.links[e].addEventListener("click",s)};t._init=function(){Barba.Pjax.getTransition=function(){return Transition},document.addEventListener("DOMContentLoaded",function(e){Barba.Pjax.start()}),Barba.Dispatcher.on("transitionCompleted",function(e,t,n){y(),w(),g()}),y(),w(),g()},t._init()}();