!function(){"use strict";function a(t){if(t)return t.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)}function d(t,e){var n=t.dataset.header,s=t.dataset.articleBefore,o=t.dataset.articleAfter;t.remove();var r=document.getElementsByClassName(f.staticryptInsertHeader),i=document.getElementsByClassName(f.staticryptInsertArticle);r[0]&&r[0].insertAdjacentHTML("beforeend",n),i[0]&&i[0].insertAdjacentHTML("beforeend",s+marked(e)+o)}function t(){c={exists:!1,element:void 0,offsetY:0,links:{},refs:{}};var t=document.getElementsByClassName(f.workMenu);if(t[0]){var e=t[0],n=e.dataset.offsety?e.dataset.offsety:0;c.exists=!0,c.element=t[0],c.offsetY=n;for(var s=document.querySelectorAll("."+f.workMenu+" a"),o=0;o<s.length;o++){var r=s[o].getAttribute("href").split("#")[1],i=document.getElementById(r);c.links[r]=s[o],c.refs[r]=i}}}function e(){if(c.exists){var t=c.element,e=t.parentNode,n=e.offsetTop,s=c.offsetY,o=window.pageYOffset||document.documentElement.scrollTop;a(e);t.style.opacity=n-s-75<=o?1:0,n-o<=s?(t.style.width=e.offsetWidth+"px",t.style.position="fixed",t.style.top=s+"px"):(t.style.width="auto",t.style.position="static")}}function s(t){if(c.exists){t.preventDefault();var e=t.target.getAttribute("href").split("#")[1],n=c.refs[e],s=parseInt(a(n))-c.offsetY;t.target.blur(),p(s,300)}}function o(t){t.preventDefault();var e=document.getElementsByClassName(f.staticryptForm);if(e[0]){var n=e[0],s=n.querySelectorAll('[type="password"]'),o=n.querySelectorAll('[type="submit"]');if(s[0]&&o[0]){var r=s[0].value,i=n.dataset.encrypted,a=i.substring(0,64),l=i.substring(64);if(CryptoJS.HmacSHA256(l,CryptoJS.SHA256(r).toString()).toString()!==a){var c=document.getElementsByClassName(f.staticryptAlert);return c[0]?c[0].classList.remove("u--noDisplay"):alert("Bad passphrase!"),void s[0].select()}sessionStorage.setItem(u,r.toString()),d(n,CryptoJS.AES.decrypt(l,r).toString(CryptoJS.enc.Utf8)),y(),v()}}}function n(){if(c.exists){c.element;var t=window.pageYOffset||document.documentElement.scrollTop,e=function(){var t={};for(var e in c.refs){var n=parseInt(a(c.refs[e]));t[e]=n-c.offsetY}return t}(),n=document.documentElement.offsetHeight-window.innerHeight;for(var s in c.links){var o=c.links[s].parentNode.classList;if(o.contains(f.workMenuLink)){var r=e[s];if(o.remove("active"),r-1<=t||n<=t){for(var i in c.links)c.links[i].parentNode.classList.remove("active");o.add("active")}}}}}function r(t){var e=document.getElementsByClassName(f.zoomImagesWidth);if(e[0]){var n=t.querySelector("figcaption");if(t.classList.contains("m--zoomImage-open"))return n&&(n.style.marginLeft="0"),t.style.width="100%",t.style.marginLeft="0",void t.classList.remove("m--zoomImage-open");t.classList.add("m--zoomImage-open");var s=e[0].offsetWidth,o=t.getBoundingClientRect().left-e[0].getBoundingClientRect().left;n&&(n.style.marginLeft=o+"px",n.style.width=t.clientWidth+"px"),t.style.width=s+"px",t.style.marginLeft="-"+o+"px"}}function i(){y(),e()}function l(){!function(){var t=document.getElementsByClassName(f.headerScroll);if(t[0]){var e=t[0];0<(window.pageYOffset||document.documentElement.scrollTop)?e.classList.add("fixed"):e.classList.remove("fixed")}}(),e(),n()}var c,m=window.Main||{},f=m.settings={headerScroll:"js--headerScroll",staticryptForm:"js--staticryptForm",staticryptInsertHeader:"js--staticryptInsertHeader",staticryptInsertArticle:"js--staticryptInsertArticle",staticryptAlert:"js--staticryptAlert",workMenu:"js--workMenu",workMenuLink:"js--workMenuLink",zoomImages:"js--zoom",zoomImagesWidth:"js--zoomWidth"},u="lilychen",p=function(t,e){var n=document.documentElement.offsetHeight-window.innerHeight;n<=t?t=n:t<=0&&(t=0);var s=(t-window.scrollY)/e*10;setTimeout(function(){window.scrollTo(window.scrollX,window.scrollY+s),window.scrollY!==t&&p(t,e-10)},10)},g=function(){var t=document.getElementsByClassName(f.staticryptForm);if(t[0]){var e=sessionStorage.getItem(u);if(e){var n=t[0],s=n.dataset.encrypted,o=s.substring(0,64),r=s.substring(64);CryptoJS.HmacSHA256(r,CryptoJS.SHA256(e).toString()).toString()===o&&d(n,CryptoJS.AES.decrypt(r,e).toString(CryptoJS.enc.Utf8))}}},y=function(){t(),function(){var t=document.getElementsByClassName(f.zoomImages);if(t[0])for(var e=0;e<t.length;e++){var n=t[e].querySelector("figcaption");n&&(n.style.marginLeft="0"),t[e].style.width="100%",t[e].style.marginLeft="0",t[e].classList.remove("m--zoomImage-open")}}()},v=function(){for(var t in window.addEventListener("resize",i),document.addEventListener("scroll",l),document.addEventListener("submit",o),c.links)c.links[t].addEventListener("click",s);for(var e=document.getElementsByClassName(f.zoomImages),n=0;n<e.length;n++)e[n].classList.add("m--zoomImage"),e[n].addEventListener("click",function(){r(this)})};m._init=function(){Barba.Pjax.getTransition=function(){return Transition},document.addEventListener("DOMContentLoaded",function(t){Barba.Pjax.start()}),Barba.Dispatcher.on("transitionCompleted",function(t,e,n){g(),y(),v()}),g(),y()},m._init()}();